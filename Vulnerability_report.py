import json
from datetime import datetime

class Vulnerability_report:
    def __init__(self):
        self.report_filename = "vulnerability_report.txt"
    def generate_report(self, vulnerabilities, predictions):
        # Open the report file for writing
        with open(self.report_filename, 'w') as f:
            # Write the report header
            f.write("Vulnerability Report\n")
            f.write("Generated: " + str(datetime.now()) + "\n")
            f.write("\n")
            # Write the vulnerabilities
            for i in range(len(vulnerabilities)):
                vulnerability = vulnerabilities[i]
                prediction = predictions[i]
                f.write("Vulnerability: " + vulnerability['name'] + "\n")
                f.write("Description: " + vulnerability['description'] + "\n")
                f.write("Severity: " + vulnerability['severity'] + "\n")
                f.write("Age: " + str(vulnerability['age']) + "\n")
                f.write("Prediction: " + prediction + "\n")
                f.write("\n")


if __name__ == '__main__':
    # Load the vulnerabilities and predictions from File2 and File3
    with open('vulnerabilities.json') as f:
        vulnerabilities = json.load(f)
    with open('predictions.json') as f:
        predictions = json.load(f)
    # Initialize the Vulnerability_report class
    report = Vulnerability_report()
    # Generate the report
    report.generate_report(vulnerabilities, predictions)
